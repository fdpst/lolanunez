import{_ as W}from"./AppDateTimePicker-BgncYox4.js";import{_ as Y}from"./AppDrawerHeaderSection-Dm2jDqJm.js";import{j as x,aT as N,r as p,w as C,o as g,f as S,e as t,b as a,n as l,ag as w,am as G,af as I,v as $,ak as K,a as J,d as M,x as P,a0 as T,I as Q,c as X,i as Z,F as ee}from"./main-BwDGDDDW.js";import{P as ae}from"./vue3-perfect-scrollbar.esm-BA1GFVP8.js";import{$ as E}from"./api-CjWrXaZL.js";import{V as te}from"./VDivider-PVfbuN4-.js";import{V as H}from"./VCard-Cpw0jw9u.js";import{V as q}from"./VCardText-BKkdmkn-.js";import{V as le}from"./VForm-DbaU_ACV.js";import{V as U,a as _}from"./VRow-DJH2tZVu.js";import{V as ie}from"./VAutocomplete-DSXORfQB.js";import{V as oe}from"./VSelect-Cdsnm3mB.js";import{V as ne}from"./VNavigationDrawer-DiCpI_FT.js";import{_ as z}from"./DeleteDialog-ClSHg4_M.js";import{V as j}from"./VDataTableServer-BLeqennM.js";import{V as se,a as re}from"./VTabs-CgMBKBzH.js";import{V as de,a as B}from"./VWindowItem-B153ir_r.js";import"./VField-5sqsN37e.js";import"./form-BEvPHhJ7.js";import"./VInput-CVFVwJKu.js";import"./VSpacer-xWNtBUsj.js";/* empty css              */import"./VAvatar-DYn3is-W.js";import"./VImg-BYy41-F9.js";import"./index-D8byVCHt.js";import"./index-9rIf2CJL.js";import"./VTextField-DqZOZREA.js";/* empty css                   */import"./VCounter-IA5S7b1U.js";import"./filter-B9tzeaPh.js";import"./VList-CLtMWoGj.js";import"./ssrBoot-B7QpyNAy.js";import"./VMenu-BWP2lKbi.js";import"./dialog-transition-GiYjLY5n.js";import"./VCheckboxBtn-CuvLREeJ.js";import"./VSelectionControl-D0_t5DTC.js";import"./VChip-CXCzEWTC.js";import"./DialogCloseBtn-B0aYGOTk.js";import"./VDialog-5yhkawgU.js";import"./VDataTable-B4BcEe_U.js";import"./VPagination-DIhj3juL.js";import"./VTable-CK8MMDdB.js";import"./VSlideGroup-B9Qeu9eC.js";const L=[{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"Miércoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"},{value:6,label:"Sábado"},{value:0,label:"Domingo"}],ue={1:"Lunes",2:"Martes",3:"Miércoles",4:"Jueves",5:"Viernes",6:"Sábado",0:"Domingo"},R={__name:"ScheduleDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},item:{type:Object,default:()=>null},tiendas:{type:Array,required:!0},days:{type:Array,required:!0},type:{type:String,required:!0}},emits:["update:isDrawerOpen","itemData"],setup(b,{emit:D}){const y=x(),d=N(),c=b,V=D,o=p({id:null,app_tienda_id:null,nombre_tienda:"Almoradi",dia:1,entrada:"00:00",salida:"00:00",entrada2:"00:00",salida2:"00:00",fechas:""}),u=p(!1),s=p(),r=()=>{V("update:isDrawerOpen",!1)},k=async()=>{let v=c.type=="usual"?"savehorario":"add-horario";try{const e=await E(`/api/app/${v}/${y.params.id}`,{method:"POST",body:o.value});d.success("Horario guardado con éxito"),V("itemData",e),V("update:isDrawerOpen",!1)}catch(e){console.log(e),d.error("Algo ha salido mal")}},O=async()=>{var i;const{valid:v,errors:e}=await((i=s.value)==null?void 0:i.validate());v&&await k()},h=()=>{K(()=>{var v,e;(v=s.value)==null||v.reset(),(e=s.value)==null||e.resetValidation()}),o.value={id:null,app_tienda_id:null,nombre_tienda:"Almoradi",fechas:"",dia:1,entrada:"00:00",salida:"00:00",entrada2:"00:00",salida2:"00:00"}};C(()=>{c.item!=null?o.value=JSON.parse(JSON.stringify(c.item)):h()});const A=v=>{V("update:isDrawerOpen",v)};return(v,e)=>{const i=Y,f=W;return g(),S(ne,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":c.isDrawerOpen,"onUpdate:modelValue":A},{default:t(()=>[a(i,{title:c.item!=null?"Editar Empleado":"Agregar Empleado",onCancel:r},null,8,["title"]),a(te),a(l(ae),{options:{wheelPropagation:!1}},{default:t(()=>[a(H,{flat:""},{default:t(()=>[a(q,null,{default:t(()=>[a(le,{ref_key:"refForm",ref:s,modelValue:l(u),"onUpdate:modelValue":e[7]||(e[7]=n=>w(u)?u.value=n:null),onSubmit:G(O,["prevent"])},{default:t(()=>[a(U,null,{default:t(()=>[a(_,{cols:"12"},{default:t(()=>[a(ie,{modelValue:l(o).app_tienda_id,"onUpdate:modelValue":e[0]||(e[0]=n=>l(o).app_tienda_id=n),density:"compact",label:"Tiendas",placeholder:"Tiendas",items:c.tiendas,"item-value":"id","item-title":"nombre"},null,8,["modelValue","items"])]),_:1}),c.type=="usual"?(g(),S(_,{key:0,cols:"12"},{default:t(()=>[a(oe,{modelValue:l(o).dia,"onUpdate:modelValue":e[1]||(e[1]=n=>l(o).dia=n),label:"Día",density:"compact",placeholder:"Selecciona una día",items:b.days,"item-value":"value","item-title":"label"},null,8,["modelValue","items"])]),_:1})):(g(),S(_,{key:1,cols:"12"},{default:t(()=>[a(f,{modelValue:l(o).fechas,"onUpdate:modelValue":e[2]||(e[2]=n=>l(o).fechas=n),label:"Vacaciones",placeholder:"Selecciona una o más fechas",config:{mode:"multiple",dateFormat:"Y-m-d"}},null,8,["modelValue"])]),_:1})),a(_,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:l(o).entrada,"onUpdate:modelValue":e[3]||(e[3]=n=>l(o).entrada=n),density:"compact",label:"Entrada",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}},null,8,["modelValue"])]),_:1}),a(_,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:l(o).salida,"onUpdate:modelValue":e[4]||(e[4]=n=>l(o).salida=n),density:"compact",label:"Salida",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}},null,8,["modelValue"])]),_:1}),a(_,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:l(o).entrada2,"onUpdate:modelValue":e[5]||(e[5]=n=>l(o).entrada2=n),density:"compact",label:"Entrada 2",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}},null,8,["modelValue"])]),_:1}),a(_,{cols:"12",md:"6"},{default:t(()=>[a(f,{modelValue:l(o).salida2,"onUpdate:modelValue":e[6]||(e[6]=n=>l(o).salida2=n),density:"compact",label:"Salida 2",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}},null,8,["modelValue"])]),_:1}),a(_,{cols:"12"},{default:t(()=>[a(I,{type:"submit",class:"me-4"},{default:t(()=>e[8]||(e[8]=[$(" Aceptar ")])),_:1}),a(I,{type:"reset",variant:"outlined",color:"error",onClick:r},{default:t(()=>e[9]||(e[9]=[$(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},me={__name:"UsualSchedule",props:{horario:{type:Array,required:!0},tiendas:{type:Array,required:!0},days:{type:Array,required:!0},days_names:{type:Object,required:!0}},emits:["fetchEmployee"],setup(b,{emit:D}){x();const y=N(),d=p(!1),c=D,V=b,o=[{title:"Id",key:"id"},{title:"Tienda",key:"nombre_tienda"},{title:"Día",key:"dia"},{title:"Entrada",key:"entrada"},{title:"Salida",key:"salida"},{title:"Acciones",key:"actions",sortable:!1}],u=p(!1),s=p({}),r=p([]),k=p({id:null,app_tienda_id:null,nombre_tienda:"Almoradi",dia:1,entrada:"00:00",salida:"00:00",entrada2:"00:00",salida2:"00:00"}),O=e=>{s.value=e,u.value=!0},h=e=>{s.value=e,d.value=!0},A=async e=>{try{const i=await E(`/api/app/deletehorario/${e}`,{method:"POST",body:k.value});y.success("Horario eliminado con éxito");let f=r.value.findIndex(n=>n.id==e);r.value.splice(f,1)}catch{y.error("Algo ha salido mal")}},v=e=>{c("fetchEmployee")};return C(()=>V.horario,e=>{r.value=JSON.parse(JSON.stringify(e))}),C(d,async e=>{e||(s.value={})}),(e,i)=>{const f=J("IconBtn");return g(),S(H,{title:"",class:"mb-6"},{default:t(()=>{var n;return[a(q,{class:""},{default:t(()=>[a(U,null,{default:t(()=>[a(_,{cols:"12",md:"2"},{default:t(()=>[a(I,{class:"mt-1",onClick:i[0]||(i[0]=m=>d.value=!0)},{default:t(()=>i[3]||(i[3]=[$(" nuevo horario ")])),_:1})]),_:1})]),_:1})]),_:1}),a(j,{items:l(r),"item-value":"id",headers:o,class:"text-no-wrap rounded-0"},{"item.dia":t(({item:m})=>[M("span",null,P(b.days_names[m.dia]),1)]),"item.actions":t(({item:m})=>[a(f,{onClick:F=>O(m),size:"small"},{default:t(()=>[a(T,{icon:"ri-delete-bin-7-line"})]),_:2},1032,["onClick"]),a(f,{onClick:F=>h(m),size:"small"},{default:t(()=>[a(T,{icon:"ri-edit-box-line",title:"Editar"})]),_:2},1032,["onClick"])]),bottom:t(()=>i[4]||(i[4]=[])),_:1},8,["items"]),a(R,{type:"usual",days:b.days,tiendas:b.tiendas,isDrawerOpen:l(d),"onUpdate:isDrawerOpen":i[1]||(i[1]=m=>w(d)?d.value=m:null),item:l(s),onItemData:v},null,8,["days","tiendas","isDrawerOpen","item"]),a(z,{isDialogVisible:l(u),"onUpdate:isDialogVisible":i[2]||(i[2]=m=>w(u)?u.value=m:null),id:(n=l(s))==null?void 0:n.id,onSubmit:A},null,8,["isDialogVisible","id"])]}),_:1})}}},pe={__name:"SpecificSchedule",props:{fechas:{type:Array,required:!0},tiendas:{type:Array,required:!0}},emits:["fetchEmployee"],setup(b,{emit:D}){x();const y=N(),d=p(!1),c=D,V=b,o=[{title:"Id",key:"id"},{title:"Tienda",key:"nombre_tienda"},{title:"Fecha",key:"fecha"},{title:"Entrada",key:"entrada"},{title:"Salida",key:"salida"},{title:"Acciones",key:"actions",sortable:!1}],u=p(!1),s=p({}),r=p([]),k=p({id:null,app_tienda_id:null,nombre_tienda:"Almoradi",dia:1,fecha:"",entrada:"00:00",salida:"00:00",entrada2:"00:00",salida2:"00:00"}),O=e=>{s.value=e,u.value=!0},h=e=>{s.value=e,d.value=!0},A=async e=>{try{const i=await E(`/api/app/deletehorario/${e}`,{method:"POST",body:k.value});y.success("Horario eliminado con éxito");let f=r.value.findIndex(n=>n.id==e);r.value.splice(f,1)}catch{y.error("Algo ha salido mal")}},v=e=>{c("fetchEmployee")};return r.value=JSON.parse(JSON.stringify(V.fechas)),C(()=>V.fechas,e=>{r.value=JSON.parse(JSON.stringify(e))}),C(d,async e=>{e||(s.value={})}),(e,i)=>{const f=J("IconBtn");return g(),S(H,{title:"",class:"mb-6"},{default:t(()=>{var n;return[a(q,{class:""},{default:t(()=>[a(U,null,{default:t(()=>[a(_,{cols:"12",md:"2"},{default:t(()=>[a(I,{class:"mt-1",onClick:i[0]||(i[0]=m=>d.value=!0)},{default:t(()=>i[3]||(i[3]=[$(" Agregar fechas ")])),_:1})]),_:1})]),_:1})]),_:1}),a(j,{items:l(r),"item-value":"id",headers:o,class:"text-no-wrap rounded-0"},{"item.actions":t(({item:m})=>[a(f,{onClick:F=>O(m),size:"small"},{default:t(()=>[a(T,{icon:"ri-delete-bin-7-line"})]),_:2},1032,["onClick"]),a(f,{onClick:F=>h(m),size:"small"},{default:t(()=>[a(T,{icon:"ri-edit-box-line",title:"Editar"})]),_:2},1032,["onClick"])]),bottom:t(()=>i[4]||(i[4]=[])),_:1},8,["items"]),a(R,{type:"s",days:"days"in e?e.days:l(L),tiendas:b.tiendas,isDrawerOpen:l(d),"onUpdate:isDrawerOpen":i[1]||(i[1]=m=>w(d)?d.value=m:null),item:l(s),onItemData:v},null,8,["days","tiendas","isDrawerOpen","item"]),a(z,{isDialogVisible:l(u),"onUpdate:isDialogVisible":i[2]||(i[2]=m=>w(u)?u.value=m:null),id:(n=l(s))==null?void 0:n.id,onSubmit:A},null,8,["isDialogVisible","id"])]}),_:1})}}},ta={__name:"[id]",setup(b){const D=x(),y=p(null),d=[{icon:"ri-calendar-event-line",title:"Horario habitual"},{icon:"ri-calendar-event-line",title:"Horario Específico"}],c=p({fechas:[],horario:[]}),V=p([]),o=async()=>{try{const u=await E(`/api/app/getempleado/${D.params.id}`);c.value=u.empleado,V.value=u.tiendas}catch{}};return Q(o),(u,s)=>(g(),S(U,null,{default:t(()=>[a(_,{cols:"12"},{default:t(()=>[a(se,{modelValue:l(y),"onUpdate:modelValue":s[0]||(s[0]=r=>w(y)?y.value=r:null),class:"v-tabs-pill"},{default:t(()=>[(g(),X(ee,null,Z(d,r=>a(re,{key:r.icon},{default:t(()=>[a(T,{start:"",icon:r.icon},null,8,["icon"]),M("span",null,P(r.title),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),a(de,{modelValue:l(y),"onUpdate:modelValue":s[1]||(s[1]=r=>w(y)?y.value=r:null),class:"mt-6 disable-tab-transition",touch:!1},{default:t(()=>[a(B,null,{default:t(()=>[a(me,{onFetchEmployee:o,days_names:l(ue),horario:l(c).horario,tiendas:l(V),days:l(L)},null,8,["days_names","horario","tiendas","days"])]),_:1}),a(B,null,{default:t(()=>[a(pe,{onFetchEmployee:o,fechas:l(c).fechas,tiendas:l(V)},null,8,["fechas","tiendas"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}};export{ta as default};
