import{r as f,o as j,c as D,b as a,e as o,d as r,n as t,J as c,x as v,y as N,v as n,am as S,af as M,F as P,j as $,k as A,a as E,B as m,ak as U}from"./main-XhKa_9tU.js";import{t as q}from"./tree1-BjdzTW--.js";import{a as z,b as O,c as G,d as J}from"./auth-v2-login-illustration-light-DbdMjcCE.js";import{a as H,b as K}from"./mask-v2-light-BzqOCMOs.js";import{V as Q}from"./VNodeRenderer-DjW8481d.js";import{u as h}from"./useGenerateImageVariant-BPKVyJGz.js";import{$ as W}from"./api-DoG2ksOD.js";import{a as d,V as b}from"./VRow-CFasNknx.js";import{V as y}from"./VImg-BWevH90G.js";import{V as X}from"./VCard-Eaj0dfV-.js";import{V as k}from"./VCardText-B_O88IhU.js";import{V as Y}from"./VForm-BH9swDaI.js";import{V as x}from"./VTextField-DG88OKPn.js";import{V as Z}from"./VCheckbox-iX1IsLro.js";import"./index-C3NwvUM2.js";import"./index-9rIf2CJL.js";/* empty css              */import"./VAvatar-BgIHgX1n.js";import"./form-BsyuclTd.js";/* empty css                   */import"./VCounter-zOsFyD3o.js";import"./VField-CvyOoNAD.js";import"./VInput-DCf9aRQz.js";import"./VCheckboxBtn-CKjjSpr9.js";import"./VSelectionControl-BXoDVL8N.js";const ee={class:"auth-logo d-flex align-center gap-x-3"},ae={class:"auth-title"},te=["src"],oe={class:"text-h4 mb-1"},se={class:"text-capitalize"},re={class:"d-flex align-center flex-wrap justify-space-between my-5 gap-2"},je={__name:"login-v2",setup(le){const w=h(J,G,O,z,!0),_=h(K,H),V=f(),l=f({email:"",password:"",remember:!1}),p=f(!1),g=$(),C=A(),R=useAbility(),I=async()=>{try{const i=await W("/login",{method:"POST",body:{email:l.value.email,password:l.value.password},onResponseError({response:F}){errors.value=F._data.errors}}),{accessToken:e,userData:u,userAbilityRules:s,empresa:T,tokenFichaje:B}=i;m("userAbilityRules").value=s,R.update(s),m("userData").value=u,m("accessToken").value=e,m("empresa").value=T,m("tokenFichaje").value=B,await U(()=>{C.replace(g.query.to?String(g.query.to):"/")})}catch(i){console.error(i)}},L=()=>{var i;(i=V.value)==null||i.validate().then(({valid:e})=>{e&&I()})};return(i,e)=>{const u=E("RouterLink");return j(),D(P,null,[a(u,{to:"/"},{default:o(()=>[r("div",ee,[a(t(Q),{nodes:t(c).app.logo},null,8,["nodes"]),r("h1",ae,v(t(c).app.title),1)])]),_:1}),a(b,{"no-gutters":"",class:"auth-wrapper"},{default:o(()=>[a(d,{md:"8",class:"d-none d-md-flex position-relative"},{default:o(()=>[r("div",{class:N(["d-flex align-center justify-end w-100 h-100 pa-10",i.$vuetify.locale.isRtl?"pe-10":"pe-0"])},[a(y,{"max-width":"797",src:t(w),class:"auth-illustration"},null,8,["src"])],2),r("img",{class:"auth-footer-mask",height:"360",src:t(_)},null,8,te),a(y,{src:t(q),alt:"tree image",height:"190",width:"90",class:"auth-footer-tree"},null,8,["src"])]),_:1}),a(d,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[a(X,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:o(()=>[a(k,null,{default:o(()=>[r("h4",oe,[e[4]||(e[4]=n(" Bienvenido a ")),r("span",se,v(t(c).app.title)+"!",1),e[5]||(e[5]=n("  "))]),e[6]||(e[6]=r("p",{class:"mb-0"}," Por favor inicia sesi贸n en tu cuenta para continuar ",-1))]),_:1}),a(k,null,{default:o(()=>[a(Y,{ref_key:"refVForm",ref:V,onSubmit:S(L,["prevent"])},{default:o(()=>[a(b,null,{default:o(()=>[a(d,{cols:"12"},{default:o(()=>[a(x,{modelValue:t(l).email,"onUpdate:modelValue":e[0]||(e[0]=s=>t(l).email=s),autofocus:"",label:"Email",type:"email",placeholder:"johndoe@email.com"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12"},{default:o(()=>[a(x,{modelValue:t(l).password,"onUpdate:modelValue":e[1]||(e[1]=s=>t(l).password=s),label:"Password",placeholder:"路路路路路路路路路路路路",type:t(p)?"text":"password","append-inner-icon":t(p)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":e[2]||(e[2]=s=>p.value=!t(p))},null,8,["modelValue","type","append-inner-icon"]),r("div",re,[a(Z,{modelValue:t(l).remember,"onUpdate:modelValue":e[3]||(e[3]=s=>t(l).remember=s),label:"Recuerdame"},null,8,["modelValue"]),a(u,{class:"text-primary",to:{name:"pages-authentication-forgot-password-v2"}},{default:o(()=>e[7]||(e[7]=[n(" 驴Olvid贸 su contrase帽a? ")])),_:1})]),a(M,{block:"",type:"submit"},{default:o(()=>e[8]||(e[8]=[n(" Iniciar sesi贸n ")])),_:1})]),_:1}),a(d,{cols:"12",class:"text-center text-base"},{default:o(()=>[e[10]||(e[10]=r("span",null,"驴Nuevo en la plataforma?",-1)),e[11]||(e[11]=n()),a(u,{class:"text-primary d-inline-block",to:{name:"pages-authentication-register-v2"}},{default:o(()=>e[9]||(e[9]=[n(" Crear una cuenta ")])),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{je as default};
