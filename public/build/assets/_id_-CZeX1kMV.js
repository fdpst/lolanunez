import{a as W}from"./formatters-zPA0pF4b.js";import{r as g,aG as j,w as J,at as H,B as G,o as V,f as D,e,b as a,d as o,am as K,n as t,c as I,x as b,z as $,af as U,v as x,aM as M,F as R,ag as P,a3 as ta,a as la,I as oa,i as sa,a0 as na,j as ia}from"./main-C1cSucNj.js";import{_ as Q}from"./DialogCloseBtn-d-aRwzHc.js";import{$ as F}from"./api-DGW-Fn2Q.js";import{V as A,d as da,b as ra}from"./VCard-DoJ7OvEk.js";import{V as E}from"./VCardText-iOQ31nyo.js";import{V as X}from"./VForm-Dy7iSAGS.js";import{V as S,a as y}from"./VRow-DdYzItfl.js";import{V as Y}from"./VAvatar-BpNw3P6_.js";import{V as Z}from"./VImg-D1aAeOw8.js";import{V as ua}from"./VFileInput-ICRu9Nlg.js";import{V as L}from"./VTextField-BDUmA4Cs.js";import{V as h}from"./VSelect-C8_y3N-_.js";import{V as ma}from"./VCheckbox-CTf9gdvj.js";import{V as aa}from"./VDialog-CiCxrpWH.js";import{_ as pa}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as ca}from"./VChip-Js2ye3Ji.js";import{V as fa}from"./VDivider-BS9Tllbl.js";import{V as ya,a as B,b as O}from"./VList-CJtIzW8v.js";import{V as Va}from"./VTextarea-AN9uyN0u.js";import{V as ba}from"./VTable-D9T-4tY3.js";import{V as _a,a as ga}from"./VTabs-C6khb03f.js";import{V as va,a as Da}from"./VWindowItem-BVQdEQhy.js";import"./helpers-DK5QwNv0.js";import"./index-D-qiIO6U.js";import"./index-9rIf2CJL.js";import"./form-BJwA8ai1.js";/* empty css              */import"./VField-BymScPN-.js";import"./VInput-wvAgDqIB.js";import"./VCounter-tCKPKrdk.js";/* empty css                   */import"./dialog-transition-apDHIwZf.js";import"./VMenu-D5ZOve3c.js";import"./VCheckboxBtn-DqgUuTHD.js";import"./VSelectionControl-CM7Gd7lS.js";import"./ssrBoot-DfsiD9ny.js";import"./VSlideGroup-Bl1sI-M8.js";const xa={key:1,class:"text-5xl font-weight-medium"},Ca={__name:"CompanyInfoEditDialog",props:{companyData:{type:Object,required:!1,default:()=>({id:null,id_tipo:null,nombre:"",url_imagen:"",cif:"",ccc:"",externo:!1})},isDialogVisible:{type:Boolean,required:!0}},emits:["submit","update:isDialogVisible"],async setup(w,{emit:k}){let l,p;const c=w,r=k,u=g(structuredClone(j(c.companyData))),n=g();J(c,()=>{u.value=structuredClone(j(c.companyData))});const s=()=>{r("update:isDialogVisible",!1),r("submit",u)},d=()=>{u.value=structuredClone(j(c.companyData)),r("update:isDialogVisible",!1)},v=T=>{r("update:isDialogVisible",T)},m=([l,p]=H(()=>F("/get-tipo-empresas",{method:"GET"})),l=await l,p(),l),C=async()=>{n.value.click()},i=async T=>{const f=T.target.files[0];if(f){const z=await q(f);u.value.url_imagen=z}},q=T=>new Promise((f,z)=>{const _=new FileReader;_.readAsDataURL(T),_.onload=()=>f(_.result),_.onerror=ea=>z(ea)}),N=G("userData");return(T,f)=>{const z=Q;return V(),D(aa,{width:T.$vuetify.display.smAndDown?"auto":900,"model-value":c.isDialogVisible,"onUpdate:modelValue":v},{default:e(()=>[a(A,{class:"pa-sm-11 pa-3"},{default:e(()=>[a(z,{variant:"text",size:"default",onClick:d}),a(E,{class:"pt-5"},{default:e(()=>[f[7]||(f[7]=o("div",{class:"text-center pb-6"},[o("h4",{class:"text-h4 mb-2"}," Editar información de la empresa "),o("div",{class:"text-body-1"}," Actualizar los detalles de la empresa ")],-1)),a(X,{class:"mt-4",onSubmit:K(s,["prevent"])},{default:e(()=>[a(S,null,{default:e(()=>[a(y,{cols:"12",md:"2"},{default:e(()=>[a(Y,{rounded:"",size:120,color:t(u).url_imagen?void 0:"primary",variant:t(u).url_imagen?void 0:"tonal",style:{cursor:"pointer"},onClick:C},{default:e(()=>[t(u).url_imagen?(V(),D(Z,{key:0,src:t(u).url_imagen},null,8,["src"])):(V(),I("span",xa,b(("avatarText"in T?T.avatarText:t(W))(t(u).nombre)),1))]),_:1},8,["color","variant"]),a(ua,{ref_key:"inputFile",ref:n,accept:"image/*",style:{display:"none"},onChange:i},null,512)]),_:1}),a(y,{cols:"12",md:"10"},{default:e(()=>[a(S,null,{default:e(()=>[a(y,{cols:"12",md:"6"},{default:e(()=>[a(L,{modelValue:t(u).nombre,"onUpdate:modelValue":f[0]||(f[0]=_=>t(u).nombre=_),label:"Nombre",placeholder:"John"},null,8,["modelValue"])]),_:1}),a(y,{cols:"12",md:"6"},{default:e(()=>[a(L,{modelValue:t(u).cif,"onUpdate:modelValue":f[1]||(f[1]=_=>t(u).cif=_),label:"C.I.F",placeholder:""},null,8,["modelValue"])]),_:1}),a(y,{cols:"12",md:"6"},{default:e(()=>[a(L,{modelValue:t(u).ccc,"onUpdate:modelValue":f[2]||(f[2]=_=>t(u).ccc=_),label:"CCC",placeholder:""},null,8,["modelValue"])]),_:1}),t(N).id_role==1?(V(),D(y,{key:0,cols:"12",md:"6"},{default:e(()=>[a(h,{modelValue:t(u).id_tipo,"onUpdate:modelValue":f[3]||(f[3]=_=>t(u).id_tipo=_),items:t(m),label:"Tipo","item-value":"id","item-title":"nombre",placeholder:"Selecciona un tipo"},null,8,["modelValue","items"])]),_:1})):$("",!0)]),_:1})]),_:1}),t(N).id_role==1?(V(),D(y,{key:0,cols:"12",md:"6"},{default:e(()=>[a(ma,{label:"Externo",modelValue:t(u).externo,"onUpdate:modelValue":f[4]||(f[4]=_=>t(u).externo=_)},null,8,["modelValue"])]),_:1})):$("",!0),a(y,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:e(()=>[a(U,{type:"submit"},{default:e(()=>f[5]||(f[5]=[x(" Aceptar ")])),_:1}),a(U,{color:"secondary",variant:"outlined",onClick:d},{default:e(()=>f[6]||(f[6]=[x(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},wa={key:1,class:"text-5xl font-weight-medium"},ka={class:"text-h5 mt-4"},Ta={class:"text-body-1"},Ua={class:"text-body-1"},Sa={class:"text-body-1"},$a={class:"text-body-1"},Ea={class:"text-body-1"},Fa={__name:"CompanyBioPanel",props:{companyData:{type:Object,required:!0}},emits:["update:companyData"],setup(w,{emit:k}){const l=w,p=g({status:!1,color:"success",message:""}),c=k,r=g(!1),u=async s=>{try{await F("/save-empresa",{method:"POST",body:s.value}),p.value={color:"success",status:!0,message:"Información actualizada con éxito"},c("update:companyData",s)}catch{p.value={color:"error",status:!0,message:"Error actualizando datos de empresa"}}},n=G("userData");return(s,d)=>{const v=Ca;return V(),I(R,null,[a(S,null,{default:e(()=>[a(M,{modelValue:t(p).status,"onUpdate:modelValue":d[0]||(d[0]=m=>t(p).status=m),location:"top end",color:t(p).color},{default:e(()=>[x(b(t(p).message),1)]),_:1},8,["modelValue","color"]),a(y,{cols:"12"},{default:e(()=>[l.companyData?(V(),D(A,{key:0},{default:e(()=>[a(E,{class:"text-center pt-12 pb-6"},{default:e(()=>[a(Y,{rounded:"",size:120,color:l.companyData.url_imagen?void 0:"primary",variant:l.companyData.url_imagem?void 0:"tonal"},{default:e(()=>[l.companyData.url_imagen?(V(),D(Z,{key:0,src:l.companyData.url_imagen},null,8,["src"])):(V(),I("span",wa,b(("avatarText"in s?s.avatarText:t(W))(l.companyData.nombre)),1))]),_:1},8,["color","variant"]),o("h5",ka,b(l.companyData.nombre),1),t(n).id_role==1?(V(),D(ca,{key:0,size:"small",class:"text-capitalize mt-4"},{default:e(()=>[x(b(l.companyData.url),1)]),_:1})):$("",!0)]),_:1}),a(E,{class:"pb-6"},{default:e(()=>[d[8]||(d[8]=o("h5",{class:"text-h5"}," Detalles ",-1)),a(fa,{class:"my-4"}),a(ya,{class:"card-list"},{default:e(()=>[a(B,null,{default:e(()=>[a(O,{class:"text-sm"},{default:e(()=>[d[3]||(d[3]=o("span",{class:"font-weight-medium"},"Nombre: ",-1)),o("span",Ta,b(l.companyData.nombre),1)]),_:1})]),_:1}),a(B,null,{default:e(()=>[a(O,{class:"text-sm"},{default:e(()=>[d[4]||(d[4]=o("span",{class:"font-weight-medium"}," C.I.F: ",-1)),o("span",Ua,b(l.companyData.cif),1)]),_:1})]),_:1}),a(B,null,{default:e(()=>[a(O,{class:"text-sm"},{default:e(()=>[d[5]||(d[5]=o("span",{class:"font-weight-medium"}," CCC: ",-1)),o("span",Sa,b(l.companyData.ccc),1)]),_:1})]),_:1}),t(n).id_role==1?(V(),I(R,{key:0},[a(B,null,{default:e(()=>[a(O,{class:"text-sm"},{default:e(()=>[d[6]||(d[6]=o("span",{class:"font-weight-medium"}," Tipo: ",-1)),o("span",$a,b(l.companyData.tipo),1)]),_:1})]),_:1}),a(B,null,{default:e(()=>[a(O,{class:"text-sm"},{default:e(()=>[d[7]||(d[7]=o("span",{class:"font-weight-medium"}," Externo: ",-1)),o("span",Ea,b(l.companyData.externo?"Si":"No"),1)]),_:1})]),_:1})],64)):$("",!0)]),_:1})]),_:1}),a(E,{class:"d-flex justify-center"},{default:e(()=>[a(U,{variant:"elevated",class:"me-4",onClick:d[1]||(d[1]=m=>r.value=!0)},{default:e(()=>d[9]||(d[9]=[x(" Editar ")])),_:1})]),_:1})]),_:1})):$("",!0)]),_:1})]),_:1}),a(v,{isDialogVisible:t(r),"onUpdate:isDialogVisible":d[2]||(d[2]=m=>P(r)?r.value=m:null),"company-data":l.companyData,onSubmit:u},null,8,["isDialogVisible","company-data"])],64)}}},Ia=pa(Fa,[["__scopeId","data-v-ad0d2916"]]),Aa={__name:"AddEditAddressCompanyDialog",props:{address:{type:Object,required:!1,default:()=>({id:null,provincia_id:null,localidad:"",direccion:"",codigo_postal:""})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","submit"],async setup(w,{emit:k}){let l,p;const c=w,r=k,u=([l,p]=H(()=>F("/get-provincias",{method:"GET"})),l=await l,p(),l),n=g(structuredClone(j(c.address))),s=()=>{r("update:isDialogVisible",!1),n.value=structuredClone(j(c.address))},d=()=>{r("update:isDialogVisible",!1),r("submit",n)};return(v,m)=>{const C=Q;return V(),D(aa,{width:v.$vuetify.display.smAndDown?"auto":900,"model-value":c.isDialogVisible,"onUpdate:modelValue":m[4]||(m[4]=i=>v.$emit("update:isDialogVisible",i))},{default:e(()=>[c.address?(V(),D(A,{key:0,class:"pa-sm-11 pa-3"},{default:e(()=>[a(E,{class:"pt-5"},{default:e(()=>[a(C,{variant:"text",size:"default",onClick:s}),m[7]||(m[7]=o("div",{class:"text-center mb-6"},[o("h4",{class:"text-h4 mb-2"}," Actualizar dirección de la empresa ")],-1)),a(X,{onSubmit:K(d,["prevent"])},{default:e(()=>[a(S,null,{default:e(()=>[a(y,{cols:"12",md:"12"},{default:e(()=>[a(Va,{modelValue:t(n).direccion,"onUpdate:modelValue":m[0]||(m[0]=i=>t(n).direccion=i),label:"Direccion",rows:"2",placeholder:""},null,8,["modelValue"])]),_:1}),a(y,{cols:"12",md:"4"},{default:e(()=>[a(h,{modelValue:t(n).provincia_id,"onUpdate:modelValue":m[1]||(m[1]=i=>t(n).provincia_id=i),label:"Provincia",placeholder:"Seleccioar una provincia",items:t(u),"item-value":"id","item-title":"nombre"},null,8,["modelValue","items"])]),_:1}),a(y,{cols:"12",md:"4"},{default:e(()=>[a(L,{modelValue:t(n).localidad,"onUpdate:modelValue":m[2]||(m[2]=i=>t(n).localidad=i),label:"Localidad",placeholder:""},null,8,["modelValue"])]),_:1}),a(y,{cols:"12",md:"4"},{default:e(()=>[a(L,{modelValue:t(n).codigo_postal,"onUpdate:modelValue":m[3]||(m[3]=i=>t(n).codigo_postal=i),label:"Codigo postal",placeholder:""},null,8,["modelValue"])]),_:1}),a(y,{cols:"12",class:"text-center"},{default:e(()=>[a(U,{type:"submit",class:"me-3"},{default:e(()=>m[5]||(m[5]=[x(" Aceptar ")])),_:1}),a(U,{variant:"outlined",color:"secondary",onClick:s},{default:e(()=>m[6]||(m[6]=[x(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):$("",!0)]),_:1},8,["width","model-value"])}}},za={class:"text-body-1 mb-2"},Ba={class:"text-body-1 mb-2"},Oa={class:"text-body-1 mb-2"},ja={class:"text-body-1 mb-2"},La={__name:"CompanyTabOverview",props:{companyData:{type:Object,required:!1,default:()=>({id:null,provincia_id:null,direccion:"",localidad:"",codigo_postal:""})}},emits:["update:companyData"],setup(w,{emit:k}){const l=w,p=g({status:!1,color:"success",message:""}),c=k;ta();const r=g(!1),u=async n=>{try{await F("/save-empresa",{method:"POST",body:n.value}),c("update:companyData",n),p.value={color:"success",status:!0,message:"Información actualizada con éxito"}}catch{p.value={color:"error",status:!0,message:"Error actualizando dirección"}}};return(n,s)=>{const d=Aa;return V(),I(R,null,[a(S,null,{default:e(()=>[a(M,{modelValue:t(p).status,"onUpdate:modelValue":s[0]||(s[0]=v=>t(p).status=v),location:"top end",color:t(p).color},{default:e(()=>[x(b(t(p).message),1)]),_:1},8,["modelValue","color"]),a(y,{cols:"12"},{default:e(()=>[a(A,{title:"Dirección"},{append:e(()=>[a(U,{size:"small",onClick:s[1]||(s[1]=v=>r.value=!t(r))},{default:e(()=>s[3]||(s[3]=[x(" Editar ")])),_:1})]),default:e(()=>[a(E,null,{default:e(()=>[a(S,null,{default:e(()=>[a(y,{cols:"12",lg:"6"},{default:e(()=>[a(ba,{class:"billing-address-table"},{default:e(()=>[o("tr",null,[s[4]||(s[4]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Dirección: ")],-1)),o("td",null,[o("p",za,b(l.companyData.direccion),1)])]),o("tr",null,[s[5]||(s[5]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Provincia: ")],-1)),o("td",null,[o("p",Ba,b(l.companyData.provincia),1)])]),o("tr",null,[s[6]||(s[6]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Localidad: ")],-1)),o("td",null,[o("p",Oa,b(l.companyData.localidad),1)])]),o("tr",null,[s[7]||(s[7]=o("td",null,[o("h6",{class:"text-h6 text-no-wrap mb-2"}," Codigo postal: ")],-1)),o("td",null,[o("p",ja,b(l.companyData.codigo_postal),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(d,{isDialogVisible:t(r),"onUpdate:isDialogVisible":s[2]||(s[2]=v=>P(r)?r.value=v:null),address:l.companyData,onSubmit:u},null,8,["isDialogVisible","address"])],64)}}},Pa={__name:"CompanySignPanel",props:{companyData:{type:Object,required:!0}},emits:["submit","update:isSignModalOpen"],setup(w,{emit:k}){const l=w,p=g({penColor:"rgb(0, 0, 0)",backgroundColor:"rgb(255,255,255)"}),c=G("userData"),r=g(!1),u=g(!1),n=g(null);g(!0);const s=C=>{let i=n.value.save(C);m(i)},d=()=>{u.value=!1,n.value.clear()},v=async C=>{try{const i=await F(`/get-firma-empresa/${C}`,{method:"GET"});n.value.fromDataURL(i)}catch(i){console.log(i)}},m=async C=>{try{const i=await F(`/save-firma-empresa/${l.companyData.id}`,{method:"POST",body:{archivo:C}});r.value=!0}catch{}};return J(()=>l.companyData,C=>{v(C.id)}),(C,i)=>{const q=la("Vue3Signature");return V(),D(S,{class:"mt-4"},{default:e(()=>[a(y,{cols:"12"},{default:e(()=>[a(A,null,{default:e(()=>[a(E,{class:"pt-4 pb-6"},{default:e(()=>[i[1]||(i[1]=o("h5",{class:"text-h5 mb-4"}," Firma ",-1)),i[2]||(i[2]=o("p",null,"Esta es la firma de la empresa, esta firma saldrá en todos los pdf de fichajes",-1)),a(q,{ref_key:"signature1",ref:n,sigOption:t(p),w:"400px",h:"230px",disabled:t(c).id_role!=2,class:"example"},null,8,["sigOption","disabled"])]),_:1}),t(c).id_role==2?(V(),D(da,{key:0,class:"mb-4"},{default:e(()=>[a(U,{onClick:s,color:"primary",variant:"outlined",class:"me-4 ml-4"},{default:e(()=>i[3]||(i[3]=[x("Aceptar")])),_:1}),a(U,{onClick:d,class:"me-4",variant:"outlined"},{default:e(()=>i[4]||(i[4]=[x("Nueva firma")])),_:1})]),_:1})):$("",!0)]),_:1})]),_:1}),a(M,{modelValue:t(r),"onUpdate:modelValue":i[0]||(i[0]=N=>P(r)?r.value=N:null),location:"top end",color:"success"},{default:e(()=>i[5]||(i[5]=[x(" Firma enviada con exito ")])),_:1},8,["modelValue"])]),_:1})}}},we={__name:"[id]",setup(w){const k=ia(),l=g(null),p=[{icon:"ri-calendar-event-line",title:"Información"}],c=g({}),r=async()=>{c.value=await F(`/get-empresa/${k.params.id}`)};return oa(r),(u,n)=>t(c)?(V(),D(S,{key:0},{default:e(()=>[a(y,{cols:"12",md:"5",lg:"4"},{default:e(()=>[a(Ia,{"company-data":t(c),"onUpdate:companyData":r},null,8,["company-data"])]),_:1}),a(y,{cols:"12",md:"7",lg:"8"},{default:e(()=>[a(_a,{modelValue:t(l),"onUpdate:modelValue":n[0]||(n[0]=s=>P(l)?l.value=s:null),class:"v-tabs-pill"},{default:e(()=>[(V(),I(R,null,sa(p,s=>a(ga,{key:s.icon},{default:e(()=>[a(na,{start:"",icon:s.icon},null,8,["icon"]),o("span",null,b(s.title),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),a(va,{modelValue:t(l),"onUpdate:modelValue":n[1]||(n[1]=s=>P(l)?l.value=s:null),class:"mt-6 disable-tab-transition",touch:!1},{default:e(()=>[a(Da,null,{default:e(()=>[a(La,{"company-data":t(c),"onUpdate:companyData":r},null,8,["company-data"])]),_:1})]),_:1},8,["modelValue"]),a(Pa,{"company-data":t(c)},null,8,["company-data"])]),_:1})]),_:1})):(V(),D(A,{key:1},{default:e(()=>[a(ra,{class:"text-center"},{default:e(()=>n[2]||(n[2]=[x(" Empresa no encontrado ")])),_:1})]),_:1}))}};export{we as default};
