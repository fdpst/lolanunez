import{B,_ as k}from"./BillsTabOverview-BJxwUsj6.js";import{r as l,I as C,c as w,d as F,b as o,e as r,af as p,n as i,ag as D,aM as R,j as T,o as $,v as m,x as I,k as N}from"./main-BwDGDDDW.js";import{$ as d}from"./api-CjWrXaZL.js";import{V as S,a as f}from"./VRow-DJH2tZVu.js";import"./UserUpgradePlanDialog-DZ2uLs0z.js";import"./ConfirmDialog-BcB1qS-q.js";import"./VCard-Cpw0jw9u.js";import"./VAvatar-DYn3is-W.js";import"./VImg-BYy41-F9.js";import"./VCardText-BKkdmkn-.js";import"./VDialog-5yhkawgU.js";import"./dialog-transition-GiYjLY5n.js";import"./DialogCloseBtn-B0aYGOTk.js";import"./VSelect-Cdsnm3mB.js";import"./VTextField-DqZOZREA.js";/* empty css                   */import"./VCounter-IA5S7b1U.js";import"./VField-5sqsN37e.js";import"./form-BEvPHhJ7.js";import"./VInput-CVFVwJKu.js";import"./VList-CLtMWoGj.js";import"./ssrBoot-B7QpyNAy.js";import"./VDivider-PVfbuN4-.js";import"./VMenu-BWP2lKbi.js";import"./VCheckboxBtn-CuvLREeJ.js";import"./VSelectionControl-D0_t5DTC.js";import"./VChip-CXCzEWTC.js";import"./UserInfoEditDialog-EThh0HQK.js";import"./VForm-DbaU_ACV.js";import"./AppDateTimePicker-BgncYox4.js";import"./VAutocomplete-DSXORfQB.js";import"./filter-B9tzeaPh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VTextarea-Ugpn_Hk5.js";import"./useApi-Cv1dvmBl.js";import"./VDataTable-B4BcEe_U.js";import"./VPagination-DIhj3juL.js";import"./VTable-CK8MMDdB.js";import"./index-D8byVCHt.js";import"./index-9rIf2CJL.js";/* empty css              */const j={class:"d-flex justify-end align-center flex-wrap gap-4 gap-y-4 mb-6"},kt={__name:"[id]",setup(E){const v=N(),n=T(),c=l([]),u=l(!1),_=l(""),a=l({id:n.params.id,total:0,descuento:0,fecha:"",id_cliente:null,comentario:"",nro_factura:0,incluir_iva:!0,cuenta:null}),s=l([]),g=t=>{a.value.descuento=t.descuento,a.value.cuenta=t.cuenta,a.value.fecha=t.fecha,a.value.id_cliente=t.id_cliente,a.value.comentario=t.comentario},h=t=>{s.value=t.itemsFactura},V=t=>{a.value.total=t},y=async()=>{try{const t=await d(`/get-factura/${n.params.id}`,{method:"GET"});a.value.nro_factura=t.nro_factura,s.value=t.items,a.value.descuento=t.descuento,a.value.comentario=t.comentario,a.value.id_cliente=t.id_cliente,a.value.total=t.total,a.value.fecha=t.fecha}catch(t){console.log(t)}},b=async()=>{try{c.value[0]=!0;const t={id:n.params.id,total:a.value.total,descuento:a.value.descuento,fecha:a.value.fecha,items:s.value,nro_factura:a.value.nro_factura,id_cliente:a.value.id_cliente,comentario:a.value.comentario},e=await d("/save-factura",{method:"POST",body:t});console.log("res",e),c.value[0]=!1,v.push("/apps/bills/list")}catch(t){console.log("error",t)}};return C(y),(t,e)=>($(),w("div",null,[F("div",j,[o(p,{variant:"outlined",color:"secondary",to:{name:"apps-bills-list"}},{default:r(()=>e[1]||(e[1]=[m(" Volver ")])),_:1}),o(p,{color:"primary",loading:i(c)[0],onClick:b},{default:r(()=>e[2]||(e[2]=[m("Actualizar")])),_:1},8,["loading"])]),o(S,null,{default:r(()=>[o(f,{cols:"12",md:"5",lg:"4"},{default:r(()=>[o(B,{onChangeData:g,data:i(a)},null,8,["data"])]),_:1}),o(f,{cols:"12",md:"7",lg:"8"},{default:r(()=>[o(k,{data:i(a),items:i(s),onChangeData:V,onChangeItems:h},null,8,["data","items"])]),_:1})]),_:1}),o(R,{location:"top end",color:"success",modelValue:i(u),"onUpdate:modelValue":e[0]||(e[0]=x=>D(u)?u.value=x:null)},{default:r(()=>[m(I(i(_)),1)]),_:1},8,["modelValue"])]))}};export{kt as default};
