import{_ as I}from"./AppDateTimePicker-Co0_bleo.js";import{V as F}from"./VTextField-BfMLnCIA.js";import{r as p,I as J,w,o as r,c as m,d as u,b as d,n as o,e as i,af as M,aK as P,aL as T,a0 as $,ag as j,F as f,i as x,f as c,s as z,z as v,x as A}from"./main-DXTHM_Z4.js";import{V as E,e as R,a as y}from"./VList-5epMYaPo.js";import{V as U}from"./VAutocomplete-BrZJDE2O.js";import{V as H}from"./VMenu-D1AAVsYt.js";import{V as q}from"./VChip-CoWdbaPm.js";const G={style:{"inline-size":"24.0625rem"},class:"mr-2"},K={style:{width:"100%",display:"flex","flex-wrap":"wrap"}},Q={style:{display:"flex","align-items":"center"}},W={style:{"padding-right":"1rem"}},X=["onClick"],se={__name:"FilterComponent",props:{value:{type:Object,default:()=>{}},headers:{type:Array,default:()=>[]}},emits:["input"],setup(g,{emit:C}){const V=g,k=C;p(!1);const t=p({}),B=p([{value:1,title:"Desde"},{value:2,title:"Hasta"},{value:3,title:"Entre"}]);p(["top","bottom","start","end","center"]);const N=p("end"),_=p([]),L=e=>{t.value[e.model].nombre=e.items.find(a=>a[e.item_value??"value"]==t.value[e.model].value)[e.item_title]},O=(e,a)=>{let n=`${a}, `;return e.nombre!=null&e.nombre!=""?n+=e.nombre:(e.start!=null||e.end!=null)&(e.start!=""||e.end!="")?(e.start!=null&e.start!=""&&(n+=e.start),e.start!=null&e.start!=""&(e.end!=null&e.end!="")&&(n+=" - "),e.end!=null&e.end!=""&&(n+=e.end)):n+=e.value,n},S=e=>{t.value[e].value="",t.value[e].start="",t.value[e].end="",t.value[e].nombre=""},D=(e,a)=>{e.tipo=a;const n=JSON.stringify(t.value);t.value=[],t.value=JSON.parse(n)},b=()=>{let e=!1;V.headers.forEach(a=>{t.value[a.model??a.title]==null&&(t.value[a.model??a.title]={tipo:1},e=!0,a.type=="date"?(t.value[a.model??a.title].end="",t.value[a.model??a.title].start=""):t.value[a.model??a.title].value=""),a.item=t.value[a.model??a.title]}),e&&(t.value=JSON.parse(JSON.stringify(t.value)))};return J(()=>{t.value=V.value??{},_.value=V.headers.map(e=>e.title),b()}),w(V.value,e=>{t.value=e,b()}),w(t,(e,a)=>{k("input",e)},{deep:!0}),(e,a)=>{const n=I;return r(),m(f,null,[u("div",G,[d(F,{modelValue:o(t).search,"onUpdate:modelValue":a[0]||(a[0]=l=>o(t).search=l),label:"BÃºsqueda",density:"compact"},null,8,["modelValue"])]),d(H,{location:o(N),"close-on-content-click":!1},{activator:i(({props:l})=>[d(M,P(T(l)),{default:i(()=>[d($,{icon:"ri-filter-line"})]),_:2},1040)]),default:i(()=>[d(E,{style:{"min-width":"20rem"},opened:o(_),"onUpdate:opened":a[1]||(a[1]=l=>j(_)?_.value=l:null)},{default:i(()=>[(r(!0),m(f,null,x(g.headers,(l,h)=>(r(),c(R,{key:h,value:l.title},{activator:i(({props:s})=>[d(y,z({ref_for:!0},s,{title:l.title}),null,16,["title"])]),default:i(()=>[l.type=="date"?(r(),c(y,{key:0},{default:i(()=>[d(U,{density:"compact",modelValue:l.item.tipo,"onUpdate:modelValue":[s=>l.item.tipo=s,s=>{D(l.item,s)}],label:"Tipo",items:o(B),class:"pt-1"},null,8,["modelValue","onUpdate:modelValue","items"]),l.item.tipo!=2?(r(),c(n,{key:0,density:"compact",class:"pt-3",label:"Desde",modelValue:o(t)[l.model].start,"onUpdate:modelValue":s=>o(t)[l.model].start=s},null,8,["modelValue","onUpdate:modelValue"])):v("",!0),l.item.tipo!=1?(r(),c(n,{key:1,density:"compact",class:"pt-3",label:"Hasta",modelValue:o(t)[l.model].end,"onUpdate:modelValue":s=>o(t)[l.model].end=s},null,8,["modelValue","onUpdate:modelValue"])):v("",!0)]),_:2},1024)):l.type=="select"?(r(),c(y,{key:1},{default:i(()=>[d(U,{density:"compact",class:"pt-1",modelValue:o(t)[l.model].value,"onUpdate:modelValue":[s=>o(t)[l.model].value=s,s=>L(l)],label:"Seleccione uno",items:l.items,"item-title":l.item_title,"item-value":l.item_value},null,8,["modelValue","onUpdate:modelValue","items","item-title","item-value"])]),_:2},1024)):v("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]),_:1},8,["location"]),u("div",K,[(r(!0),m(f,null,x(Object.keys(o(t)),(l,h)=>(r(),m(f,{key:h},[o(t)[l]?(r(),m(f,{key:0},[o(t)[l].value!=""&o(t)[l].value!=null||o(t)[l].nombre!=""&o(t)[l].nombre!=null||o(t)[l].start!=""&o(t)[l].start!=null||o(t)[l].end!=""&o(t)[l].end!=null?(r(),c(q,{key:0,style:{"margin-bottom":"0.25rem"}},{default:i(()=>[u("div",Q,[u("div",W,A(O(o(t)[l],l)),1),u("div",{style:{cursor:"pointer",display:"flex","align-items":"center"},onClick:s=>S(l)},a[2]||(a[2]=[u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"icon"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,X)])]),_:2},1024)):v("",!0)],64)):v("",!0)],64))),128))])],64)}}};export{se as _};
