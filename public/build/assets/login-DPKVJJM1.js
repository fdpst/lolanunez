import{r as x,e as j}from"./validators-CrSGMxiT.js";import{r as d,o as M,c as N,b as t,e as o,d as i,n as e,J as g,x as R,v as f,am as A,ag as E,af as P,F as U,j as $,k as O,a as z,B as v,ak as G}from"./main-XhKa_9tU.js";import{a as J,b as H,c as K,d as Q}from"./auth-v2-login-illustration-light-DbdMjcCE.js";import{l as W}from"./logo-DerEBtZf.js";import{a as X,b as Y}from"./mask-v2-light-BzqOCMOs.js";import{V as Z}from"./VNodeRenderer-DjW8481d.js";import{u as C}from"./useGenerateImageVariant-BPKVyJGz.js";import{$ as aa}from"./api-DoG2ksOD.js";import{a as c,V as L}from"./VRow-CFasNknx.js";import{V as ea}from"./VImg-BWevH90G.js";import{V as ta}from"./VCard-Eaj0dfV-.js";import{V as B}from"./VCardText-B_O88IhU.js";import{V as ra}from"./VForm-BH9swDaI.js";import{V as I}from"./VTextField-DG88OKPn.js";import{V as oa}from"./VCheckbox-iX1IsLro.js";import"./helpers-DK5QwNv0.js";import"./index-C3NwvUM2.js";import"./index-9rIf2CJL.js";/* empty css              */import"./VAvatar-BgIHgX1n.js";import"./form-BsyuclTd.js";/* empty css                   */import"./VCounter-zOsFyD3o.js";import"./VField-CvyOoNAD.js";import"./VInput-DCf9aRQz.js";import"./VCheckboxBtn-CKjjSpr9.js";import"./VSelectionControl-BXoDVL8N.js";const sa={class:"auth-logo d-flex align-center gap-x-3"},la={class:"auth-title"},ia={class:"d-flex align-center justify-center w-100 h-100 pa-10 pe-0"},na=["src"],ua={class:"text-h4 mb-1"},da={class:"text-capitalize"},ma={class:"d-flex align-center flex-wrap justify-space-between my-5 gap-2"},Pa={__name:"login",setup(pa){C(Q,K,H,J,!0);const T=C(Y,X),m=d(!1),h=$(),q=O(),D=useAbility(),u=d({email:void 0,password:void 0}),w=d(),n=d({email:"",password:""}),V=d(!1),F=async()=>{try{const r=await aa("/api/login",{method:"POST",body:{email:n.value.email,password:n.value.password},onResponseError({response:l}){var b,y,k,_;((y=(b=l==null?void 0:l._data)==null?void 0:b.error)==null?void 0:y.email)!=null?u.value.email=l._data.errors.email:u.value.email=l._data.message,((_=(k=l==null?void 0:l._data)==null?void 0:k.error)==null?void 0:_.password)!=null&&(u.value.password=l._data.errors.password)}}),{accessToken:a,userData:p,userAbilityRules:s}=r;v("userAbilityRules").value=s,D.update(s),v("userData").value=p,v("accessToken").value=a,await G(()=>{q.replace(h.query.to?String(h.query.to):"/")})}catch(r){console.error(r)}},S=()=>{var r;(r=w.value)==null||r.validate().then(({valid:a})=>{a&&F()})};return(r,a)=>{const p=z("RouterLink");return M(),N(U,null,[t(p,{to:"/"},{default:o(()=>[i("div",sa,[t(e(Z),{nodes:e(g).app.logo},null,8,["nodes"]),i("h1",la,R(e(g).app.title),1)])]),_:1}),t(L,{"no-gutters":"",class:"auth-wrapper"},{default:o(()=>[t(c,{md:"8",class:"d-none d-md-flex position-relative"},{default:o(()=>[i("div",ia,[t(ea,{"max-width":"300",src:e(W),class:"auth-illustration"},null,8,["src"])]),i("img",{class:"auth-footer-mask",height:"360",src:e(T)},null,8,na)]),_:1}),t(c,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[t(ta,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:o(()=>[t(B,null,{default:o(()=>[i("h4",ua,[a[4]||(a[4]=f(" Bienvenido a ")),i("span",da,R(e(g).app.title)+"!",1),a[5]||(a[5]=f("  "))]),a[6]||(a[6]=i("p",{class:"mb-0"}," Por favor inicia sesi贸n en tu cuenta para continuar ",-1))]),_:1}),t(B,null,{default:o(()=>[t(e(ra),{ref_key:"refVForm",ref:w,onSubmit:A(S,["prevent"])},{default:o(()=>[t(L,null,{default:o(()=>[t(c,{cols:"12"},{default:o(()=>[t(I,{modelValue:e(n).email,"onUpdate:modelValue":a[0]||(a[0]=s=>e(n).email=s),label:"Email",placeholder:"johndoe@email.com",type:"email",autofocus:"",rules:["requiredValidator"in r?r.requiredValidator:e(x),"emailValidator"in r?r.emailValidator:e(j)],"error-messages":e(u).email},null,8,["modelValue","rules","error-messages"])]),_:1}),t(c,{cols:"12"},{default:o(()=>[t(I,{modelValue:e(n).password,"onUpdate:modelValue":a[1]||(a[1]=s=>e(n).password=s),label:"Contrase帽a",placeholder:"路路路路路路路路路路路路",rules:["requiredValidator"in r?r.requiredValidator:e(x)],type:e(m)?"text":"password","error-messages":e(u).password,"append-inner-icon":e(m)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":a[2]||(a[2]=s=>m.value=!e(m))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),i("div",ma,[t(oa,{modelValue:e(V),"onUpdate:modelValue":a[3]||(a[3]=s=>E(V)?V.value=s:null),label:"Recuerdame"},null,8,["modelValue"]),t(p,{class:"text-primary",to:{name:"forgot-password"}},{default:o(()=>a[7]||(a[7]=[f(" 驴Olvid贸 su contrase帽a? ")])),_:1})]),t(P,{block:"",type:"submit"},{default:o(()=>a[8]||(a[8]=[f(" Iniciar Sesi贸n ")])),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{Pa as default};
