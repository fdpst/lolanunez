import{_ as de}from"./DialogCloseBtn-CNCrzKby.js";import{V as Q}from"./VCard-Eaj0dfV-.js";import{V as L}from"./VCardText-B_O88IhU.js";import{V as ue}from"./VForm-BH9swDaI.js";import{V as re}from"./VTextField-DG88OKPn.js";import{V as me}from"./VTable-Cb5v_Kut.js";import{V as I}from"./VCheckbox-iX1IsLro.js";import{r as f,a6 as W,w as N,o as v,f as D,e as t,b as e,d as a,x as V,n as r,ag as U,c as M,F,i as K,af as A,v as C,aw as z,ax as E,ay as B,an as S,ao as q,az as H,aA as te,aB as ce,ds as pe,dt as fe,a as Y,z as J,a0 as P,at as ve}from"./main-XhKa_9tU.js";import{V as ge}from"./VDialog-0i2MyK-R.js";import{a as R,V as Z}from"./VRow-CFasNknx.js";import{V as ee}from"./VSpacer-BCVgdAwd.js";import{V as O}from"./VAvatar-BgIHgX1n.js";import{a as _e}from"./formatters-zPA0pF4b.js";import{$ as Ve}from"./api-DoG2ksOD.js";import{p as xe}from"./paginationMeta-BbY5dJ0C.js";import{u as ye}from"./useApi-DcRr_kEa.js";import{c as he}from"./createUrl-BuKZyWmd.js";import{V as ae}from"./VSelect-BBvcpHuX.js";import{V as be}from"./VDataTableServer-dLSgHCq6.js";import{V as we}from"./VImg-BWevH90G.js";import{V as Ue}from"./VChip-BBE3Enfq.js";import{V as ke}from"./VMenu-D_PRx64v.js";import{V as Ce,a as se,b as le}from"./VList-DjfFgeFe.js";import{V as $e}from"./VDivider-C4lH0ooT.js";import"./form-BsyuclTd.js";/* empty css                   */import"./VCounter-zOsFyD3o.js";import"./VField-CvyOoNAD.js";import"./VInput-DCf9aRQz.js";import"./VCheckboxBtn-CKjjSpr9.js";import"./VSelectionControl-BXoDVL8N.js";import"./dialog-transition-B2pKVHb-.js";/* empty css              */import"./helpers-DK5QwNv0.js";import"./index-C3NwvUM2.js";import"./index-9rIf2CJL.js";import"./VDataTable-CrfrFXcg.js";import"./VPagination-64W-UBzK.js";import"./filter-Bi6u83zm.js";import"./ssrBoot-BEJ69UV0.js";const Me={class:"text-center mb-6"},Pe={class:"text-h4 mb-2"},De={class:"text-body-1"},Re={colspan:"3"},Ae={class:"d-flex justify-end"},ze={class:"text-h6"},Ee={style:{"inline-size":"5.75rem"}},Be={class:"d-flex justify-end"},Se={style:{"inline-size":"5.75rem"}},Fe={class:"d-flex justify-end"},Le={style:{"inline-size":"5.75rem"}},Te={class:"d-flex justify-end"},je={class:"d-flex align-center justify-center gap-3 mt-6"},Ie={__name:"AddEditRoleDialog",props:{rolePermissions:{type:Object,required:!1,default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","update:rolePermissions"],setup(T,{emit:k}){const n=T,_=k,m=f([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),x=f(!1),y=f(""),o=f(),p=W(()=>{let u=0;return m.value.forEach(i=>{Object.entries(i).forEach(([$,c])=>{$!=="name"&&c&&u++})}),u}),h=W(()=>p.value>0&&p.value<m.value.length*3);N(x,u=>{m.value=m.value.map(i=>({...i,read:u,write:u,create:u}))}),N(h,()=>{h.value||(x.value=!1)}),N(m,()=>{p.value===m.value.length*3&&(x.value=!0)},{deep:!0}),N(n,()=>{n.rolePermissions&&n.rolePermissions.permissions.length&&(y.value=n.rolePermissions.name,m.value=m.value.map(u=>{var $;const i=($=n.rolePermissions)==null?void 0:$.permissions.find(c=>c.name===u.name);return i?{...u,...i}:u}))});const d=()=>{var i;const u={name:y.value,permissions:m.value};_("update:rolePermissions",u),_("update:isDialogVisible",!1),x.value=!1,(i=o.value)==null||i.reset()},w=()=>{var u;_("update:isDialogVisible",!1),x.value=!1,(u=o.value)==null||u.reset()};return(u,i)=>{const $=de;return v(),D(ge,{width:u.$vuetify.display.smAndDown?"auto":900,"model-value":n.isDialogVisible,"onUpdate:modelValue":w},{default:t(()=>[e(Q,{class:"pa-sm-8 pa-5"},{default:t(()=>[e($,{variant:"text",size:"default",onClick:w}),e(L,{class:"mt-5"},{default:t(()=>[a("div",Me,[a("h4",Pe,V(n.rolePermissions.name?"Edit":"Add")+" Role ",1),a("p",De,V(n.rolePermissions.name?"Edit":"Add")+" Role ",1)]),e(r(ue),{ref_key:"refPermissionForm",ref:o},{default:t(()=>[e(re,{modelValue:r(y),"onUpdate:modelValue":i[0]||(i[0]=c=>U(y)?y.value=c:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),i[6]||(i[6]=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1)),e(me,{class:"permission-table text-no-wrap"},{default:t(()=>[a("tr",null,[i[3]||(i[3]=a("td",{class:"text-h6"}," Administrator Access ",-1)),a("td",Re,[a("div",Ae,[e(I,{modelValue:r(x),"onUpdate:modelValue":i[1]||(i[1]=c=>U(x)?x.value=c:null),indeterminate:r(h),"onUpdate:indeterminate":i[2]||(i[2]=c=>U(h)?h.value=c:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(v(!0),M(F,null,K(r(m),c=>(v(),M("tr",{key:c.name},[a("td",ze,V(c.name),1),a("td",Ee,[a("div",Be,[e(I,{modelValue:c.read,"onUpdate:modelValue":b=>c.read=b,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",Se,[a("div",Fe,[e(I,{modelValue:c.write,"onUpdate:modelValue":b=>c.write=b,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",Le,[a("div",Te,[e(I,{modelValue:c.create,"onUpdate:modelValue":b=>c.create=b,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",je,[e(A,{onClick:d},{default:t(()=>i[4]||(i[4]=[C(" Submit ")])),_:1}),e(A,{color:"secondary",variant:"outlined",onClick:w},{default:t(()=>i[5]||(i[5]=[C(" Cancel ")])),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ne="/build/assets/pose_m1-CouyXeES.png",qe={class:"v-avatar-group"},Oe={class:"text-high-emphasis"},Qe={class:"text-h5 mb-1"},We={class:"d-flex align-center"},Xe=["onClick"],Ge=["src"],He={__name:"RoleCards",setup(T){const k=f([{role:"Administrator",users:[z,E,B,S],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[z,E,B,S,q,H,te],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[z,E,B,S,q],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[z,E,B,S,q,H],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[z,E,B,S,q,H,te,ce,pe,fe],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),n=f(!1),_=f(),m=f(!1),x=y=>{n.value=!0,_.value=y};return(y,o)=>{const p=Y("IconBtn"),h=Ie;return v(),M(F,null,[e(Z,null,{default:t(()=>[(v(!0),M(F,null,K(r(k),d=>(v(),D(R,{key:d.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(Q,null,{default:t(()=>[e(L,{class:"d-flex align-center"},{default:t(()=>[a("span",null,"Total "+V(d.users.length)+" users",1),e(ee),a("div",qe,[(v(!0),M(F,null,K(d.users,(w,u)=>(v(),M(F,{key:w},[d.users.length>4&&d.users.length!==4&&u<3?(v(),D(O,{key:0,size:"40",image:w},null,8,["image"])):J("",!0),d.users.length===4?(v(),D(O,{key:1,size:"40",image:w},null,8,["image"])):J("",!0)],64))),128)),d.users.length>4?(v(),D(O,{key:0,color:y.$vuetify.theme.name==="dark"?"#3F3B59":"#F0EFF0"},{default:t(()=>[a("span",Oe," +"+V(d.users.length-3),1)]),_:2},1032,["color"])):J("",!0)])]),_:2},1024),e(L,null,{default:t(()=>[a("h5",Qe,V(d.role),1),a("div",We,[a("a",{href:"javascript:void(0)",onClick:w=>x(d.details)}," Edit Role ",8,Xe),e(ee),e(p,{color:"secondary",class:"mt-n2"},{default:t(()=>[e(P,{icon:"ri-file-copy-line"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(R,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(Q,{class:"h-100",ripple:!1},{default:t(()=>[e(Z,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(R,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:t(()=>[a("img",{width:"65",src:r(Ne)},null,8,Ge)]),_:1}),e(R,{cols:"7"},{default:t(()=>[e(L,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(A,{size:"small",onClick:o[0]||(o[0]=d=>m.value=!0)},{default:t(()=>o[4]||(o[4]=[C(" Add Role ")])),_:1}),o[5]||(o[5]=a("span",{class:"text-end"},"Add role, if it doesn't exist.",-1))]),_:1})]),_:1})]),_:1})]),_:1}),e(h,{"is-dialog-visible":r(m),"onUpdate:isDialogVisible":o[1]||(o[1]=d=>U(m)?m.value=d:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(h,{"is-dialog-visible":r(n),"onUpdate:isDialogVisible":o[2]||(o[2]=d=>U(n)?n.value=d:null),"role-permissions":r(_),"onUpdate:rolePermissions":o[3]||(o[3]=d=>U(_)?_.value=d:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}},Je={class:"app-user-search-filter d-flex flex-wrap gap-4"},Ke={style:{"inline-size":"15.625rem"}},Ye={style:{"inline-size":"10rem"}},Ze={class:"d-flex"},et={key:1},tt={class:"d-flex flex-column"},at={class:"text-sm"},st={class:"d-flex gap-4"},lt={class:"text-h6 text-capitalize font-weight-regular"},rt={class:"text-h6 font-weight-regular text-capitalize"},ot={class:"d-flex justify-end flex-wrap gap-x-6 px-2 py-1"},it={class:"d-flex align-center gap-x-2 text-medium-emphasis text-base"},nt={class:"d-flex align-center text-base text-high-emphasis me-2 mb-0"},dt={class:"d-flex gap-x-2 align-center me-2"},ut={__name:"UserList",async setup(T){let k,n;const _=f(""),m=f(),x=f(),y=f(),o=f(10),p=f(1),h=f(),d=f(),w=g=>{var s,j;p.value=g.page,h.value=(s=g.sortBy[0])==null?void 0:s.key,d.value=(j=g.sortBy[0])==null?void 0:j.order},u=[{title:"User",key:"user"},{title:"Email",key:"email"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:i,execute:$}=([k,n]=ve(()=>ye(he("/apps/users",{query:{q:_,status:y,plan:x,role:m,itemsPerPage:o,page:p,sortBy:h,orderBy:d}}))),k=await k,n(),k),c=W(()=>i.value.users),b=W(()=>i.value.totalUsers),oe=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],X=g=>{const s=g.toLowerCase();return s==="subscriber"?{color:"success",icon:"ri-user-line"}:s==="author"?{color:"error",icon:"ri-computer-line"}:s==="maintainer"?{color:"info",icon:"ri-pie-chart-line"}:s==="editor"?{color:"warning",icon:"ri-edit-box-line"}:s==="admin"?{color:"primary",icon:"ri-vip-crown-line"}:{color:"primary",icon:"ri-user-line"}},ie=g=>{const s=g.toLowerCase();return s==="pending"?"warning":s==="active"?"success":s==="inactive"?"secondary":"primary"},ne=async g=>{await Ve(`/apps/users/${g}`,{method:"DELETE"}),$()};return(g,s)=>{const j=Y("RouterLink"),G=Y("IconBtn");return v(),M("section",null,[e(Q,null,{default:t(()=>[e(L,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(A,{variant:"outlined",color:"secondary","prepend-icon":"ri-share-box-line"},{default:t(()=>s[6]||(s[6]=[C(" Export ")])),_:1}),e(ee),a("div",Je,[a("div",Ke,[e(re,{modelValue:r(_),"onUpdate:modelValue":s[0]||(s[0]=l=>U(_)?_.value=l:null),placeholder:"Search User",density:"compact"},null,8,["modelValue"])]),a("div",Ye,[e(ae,{modelValue:r(m),"onUpdate:modelValue":s[1]||(s[1]=l=>U(m)?m.value=l:null),placeholder:"Select Role",items:oe,density:"compact",clearable:"","clear-icon":"ri-close-line"},null,8,["modelValue"])])])]),_:1}),e(be,{"items-per-page":r(o),"onUpdate:itemsPerPage":s[5]||(s[5]=l=>U(o)?o.value=l:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:r(c),"item-value":"id","items-length":r(b),headers:u,"show-select":"",class:"text-no-wrap rounded-0","onUpdate:options":w},{"item.user":t(({item:l})=>[a("div",Ze,[e(O,{size:"34",variant:l.avatar?void 0:"tonal",color:l.avatar?void 0:X(l.role).color,class:"me-3"},{default:t(()=>[l.avatar?(v(),D(we,{key:0,src:l.avatar},null,8,["src"])):(v(),M("span",et,V(("avatarText"in g?g.avatarText:r(_e))(l.fullName)),1))]),_:2},1032,["variant","color"]),a("div",tt,[e(j,{to:{name:"apps-user-view-id",params:{id:l.id}},class:"text-h6"},{default:t(()=>[C(V(l.fullName),1)]),_:2},1032,["to"]),a("span",at,"@"+V(l.username),1)])])]),"item.role":t(({item:l})=>[a("div",st,[e(P,{size:"22",icon:X(l.role).icon,color:X(l.role).color},null,8,["icon","color"]),a("h6",lt,V(l.role),1)])]),"item.plan":t(({item:l})=>[a("h6",rt,V(l.currentPlan),1)]),"item.status":t(({item:l})=>[e(Ue,{color:ie(l.status),size:"small",class:"text-capitalize"},{default:t(()=>[C(V(l.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:l})=>[e(G,{size:"small",onClick:mt=>ne(l.id)},{default:t(()=>[e(P,{icon:"ri-delete-bin-7-line"})]),_:2},1032,["onClick"]),e(G,{size:"small",to:{name:"apps-user-view-id",params:{id:l.id}}},{default:t(()=>[e(P,{icon:"ri-eye-line"})]),_:2},1032,["to"]),e(G,{size:"small"},{default:t(()=>[e(P,{icon:"ri-more-2-line"}),e(ke,{activator:"parent"},{default:t(()=>[e(Ce,null,{default:t(()=>[e(se,{link:""},{prepend:t(()=>[e(P,{size:"20",icon:"ri-edit-box-line"})]),default:t(()=>[e(le,null,{default:t(()=>s[7]||(s[7]=[C("Edit")])),_:1})]),_:1}),e(se,{link:""},{prepend:t(()=>[e(P,{size:"20",icon:"ri-download-line"})]),default:t(()=>[e(le,null,{default:t(()=>s[8]||(s[8]=[C("Download")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),bottom:t(()=>[e($e),a("div",ot,[a("div",it,[s[9]||(s[9]=C(" Filas por pÃ¡gina: ")),e(ae,{modelValue:r(o),"onUpdate:modelValue":s[2]||(s[2]=l=>U(o)?o.value=l:null),class:"per-page-select",variant:"plain",items:[10,20,25,50,100]},null,8,["modelValue"])]),a("p",nt,V(("paginationMeta"in g?g.paginationMeta:r(xe))({page:r(p),itemsPerPage:r(o)},r(b))),1),a("div",dt,[e(A,{class:"flip-in-rtl",icon:"ri-arrow-left-s-line",variant:"text",density:"comfortable",color:"high-emphasis",disabled:r(p)<=1,onClick:s[3]||(s[3]=l=>r(p)<=1?p.value=1:p.value--)},null,8,["disabled"]),e(A,{class:"flip-in-rtl",icon:"ri-arrow-right-s-line",density:"comfortable",variant:"text",color:"high-emphasis",disabled:r(p)>=Math.ceil(r(b)/r(o)),onClick:s[4]||(s[4]=l=>r(p)>=Math.ceil(r(b)/r(o))?p.value=Math.ceil(r(b)/r(o)):p.value++)},null,8,["disabled"])])])]),_:1},8,["items-per-page","items","items-length"])]),_:1})])}}},Yt={__name:"index",setup(T){return(k,n)=>(v(),D(Z,null,{default:t(()=>[e(R,{cols:"12"},{default:t(()=>n[0]||(n[0]=[a("h5",{class:"text-h5 mb-1"}," Roles List ",-1),a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1)])),_:1}),e(R,{cols:"12"},{default:t(()=>[e(He)]),_:1}),e(R,{cols:"12"},{default:t(()=>[n[1]||(n[1]=a("h5",{class:"text-h5 mt-6"}," Total users with their roles ",-1)),n[2]||(n[2]=a("p",{class:"text-body-1 mb-6"}," Find all of your company's administrator accounts and their associate roles. ",-1)),e(ut)]),_:1})]),_:1}))}};export{Yt as default};
