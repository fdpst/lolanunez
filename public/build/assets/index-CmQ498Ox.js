import{r as i,I as U,df as D,dg as V,dh as j,c as B,b as t,e as l,am as E,aM as M,o as N,d as _,af as g,v as p,x as O}from"./main-BwDGDDDW.js";import{$ as b}from"./api-CjWrXaZL.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as G}from"./VForm-DbaU_ACV.js";import{V as y,a as n}from"./VRow-DJH2tZVu.js";import{V as I}from"./VCard-Cpw0jw9u.js";import{V as R}from"./VCardText-BKkdmkn-.js";import{V as x}from"./VTextField-DqZOZREA.js";import{V as Z}from"./VSelect-Cdsnm3mB.js";import{V as $}from"./VCheckbox-B4LfpRVf.js";import"./index-D8byVCHt.js";import"./index-9rIf2CJL.js";import"./form-BEvPHhJ7.js";/* empty css              */import"./VAvatar-DYn3is-W.js";import"./VImg-BYy41-F9.js";/* empty css                   */import"./VCounter-IA5S7b1U.js";import"./VField-5sqsN37e.js";import"./VInput-CVFVwJKu.js";import"./VList-CLtMWoGj.js";import"./ssrBoot-B7QpyNAy.js";import"./VDivider-PVfbuN4-.js";import"./dialog-transition-GiYjLY5n.js";import"./VMenu-BWP2lKbi.js";import"./VCheckboxBtn-CuvLREeJ.js";import"./VSelectionControl-D0_t5DTC.js";import"./VChip-CXCzEWTC.js";const h={class:"d-flex flex-wrap justify-end gap-4 mb-6"},K={class:"d-flex gap-4 align-center flex-wrap"},P={__name:"index",setup(q){const u=i(!1),d=i("success"),m=i(""),f=i(null),v=i(!1),c=i([]),o=i({id:null,activo:!1,stripe_key:"",stripe_secret:"",tienda_id:null,logo:null});U(async()=>{try{const e=await b("/get-config",{method:"GET"});e.config!=null&&(o.value=e.config),c.value=e.tiendas}catch(e){console.error("Error de red:",e)}});const k=i(),s=i(null),{open:H,onChange:S}=D({accept:"image/*"});function w(e){if(console.log("fileData",s.value),(e==null?void 0:e.length)>0){const a=e[0];if(a.type.slice(0,6)!=="image/"){alert("Only image files are allowed");return}s.value={file:a,url:V(a).value??""}}}S(e=>{if(console.log("fileData",s.value),(e==null?void 0:e.length)>0){const a=e[0];s.value={file:a,url:V(a).value??""}}}),j(k,w);const C=async()=>{try{const e=new FormData;e.append("id",o.value.id),e.append("activo",o.value.activo),e.append("stripe_key",o.value.stripe_key),e.append("stripe_secret",o.value.stripe_secret),e.append("tienda_id",o.value.tienda_id),e.append("logo",s.value.file);const a=await b("/save-config",{method:"POST",body:e});m.value=a.message,d.value="success",u.value=!0}catch(e){d.value="error",m.value=e.response._data.error,u.value=!0}},T=()=>{var e;(e=f.value)==null||e.validate().then(({valid:a})=>{a&&C()})};return(e,a)=>(N(),B("div",null,[t(G,{ref_key:"refForm",ref:f,modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=r=>v.value=r),onSubmit:E(T,["prevent"])},{default:l(()=>[_("div",h,[_("div",K,[t(g,{variant:"outlined"},{default:l(()=>a[6]||(a[6]=[p(" Descartar ")])),_:1}),t(g,{type:"submit"},{default:l(()=>a[7]||(a[7]=[p(" Guardar ")])),_:1})])]),t(y,null,{default:l(()=>[t(n,{md:"12"},{default:l(()=>[t(I,{class:"mb-6"},{default:l(()=>[t(R,null,{default:l(()=>[t(y,null,{default:l(()=>[t(n,{cols:"12",md:"6"},{default:l(()=>[t(x,{label:"Stripe Key",modelValue:o.value.stripe_key,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value.stripe_key=r)},null,8,["modelValue"])]),_:1}),t(n,{cols:"12",md:"6"},{default:l(()=>[t(x,{label:"Stripe secret",modelValue:o.value.stripe_secret,"onUpdate:modelValue":a[1]||(a[1]=r=>o.value.stripe_secret=r)},null,8,["modelValue"])]),_:1}),t(n,{cols:"12",md:"6"},{default:l(()=>[t(Z,{label:"Tienda",modelValue:o.value.tienda_id,"onUpdate:modelValue":a[2]||(a[2]=r=>o.value.tienda_id=r),items:c.value,"item-title":"nombre","item-value":"id"},null,8,["modelValue","items"])]),_:1}),t(n,{cols:"12",md:"6"},{default:l(()=>[t($,{modelValue:o.value.activo,"onUpdate:modelValue":a[3]||(a[3]=r=>o.value.activo=r),label:"Activar pago"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(M,{modelValue:u.value,"onUpdate:modelValue":a[5]||(a[5]=r=>u.value=r),location:"top end",color:d.value},{default:l(()=>[p(O(m.value),1)]),_:1},8,["modelValue","color"])]))}},xe=A(P,[["__scopeId","data-v-e7adb90d"]]);export{xe as default};
