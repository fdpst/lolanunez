import{r as y,e as x}from"./validators-CrSGMxiT.js";import{r as d,o as F,c as I,b as a,e as t,d as s,n as o,J as g,x as R,am as B,ag as C,af as P,v as T,a0 as j,F as q,j as L,k as S,a as D,ak as E}from"./main-DXTHM_Z4.js";import{a as M,b as N,c as O,d as $}from"./auth-v2-forgot-password-illustration-light-yLBqdcQ7.js";import{l as G}from"./logo-DerEBtZf.js";import{a as J,b as U}from"./mask-v2-light-BzqOCMOs.js";import{V as z}from"./VNodeRenderer-D_LB9YB1.js";import{u as V}from"./useGenerateImageVariant-BxvOAjQR.js";import{$ as A}from"./api-CWHLgCqw.js";import{a as i,V as h}from"./VRow-U9BCKMf6.js";import{V as H}from"./VImg-DTTLi8N3.js";import{V as K}from"./VCard-BBjecQUS.js";import{V as v}from"./VCardText-DGP4d7zZ.js";import{V as Q}from"./VForm-B4Tyf17S.js";import{V as W}from"./VTextField-BfMLnCIA.js";import"./helpers-DK5QwNv0.js";import"./index-D1tqMycq.js";import"./index-9rIf2CJL.js";/* empty css              */import"./VAvatar-QubjHI1z.js";import"./form-ijrz4ipO.js";/* empty css                   */import"./VCounter-CfjE-LQa.js";import"./VField-B2YWi8oL.js";import"./VInput-BZH6jw62.js";const X={class:"auth-logo d-flex align-center gap-x-3"},Y={class:"auth-title"},Z={class:"d-flex align-center justify-center w-100 h-100 pa-10 pe-0"},aa=["src"],Ia={__name:"forgot-password",setup(ea){V($,O,N,M,!0);const _=V(U,J),f=L(),k=S(),n=d(""),p=d(),u=d(!1),c=d({email:void 0}),w=async()=>{u.value=!0;try{const r=await A("/api/forgot-password",{method:"POST",body:{email:n.value},onResponseError({response:e}){var l,m;((m=(l=e==null?void 0:e._data)==null?void 0:l.error)==null?void 0:m.email)!=null?c.value.email=e._data.errors.email:c.value.email=e._data.message}});u.value=!1,await E(()=>{k.replace(f.query.to?String(f.query.to):"/")})}catch(r){u.value=!1,console.error(r)}},b=()=>{var r;(r=p.value)==null||r.validate().then(({valid:e})=>{e&&w()})};return(r,e)=>{const l=D("RouterLink");return F(),I(q,null,[a(l,{to:"/"},{default:t(()=>[s("div",X,[a(o(z),{nodes:o(g).app.logo},null,8,["nodes"]),s("h1",Y,R(o(g).app.title),1)])]),_:1}),a(h,{class:"auth-wrapper","no-gutters":""},{default:t(()=>[a(i,{md:"8",class:"d-none d-md-flex position-relative"},{default:t(()=>[s("div",Z,[a(H,{"max-width":"300",src:o(G),class:"auth-illustration"},null,8,["src"])]),s("img",{class:"auth-footer-mask",height:"360",src:o(_)},null,8,aa)]),_:1}),a(i,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:t(()=>[a(K,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:t(()=>[a(v,null,{default:t(()=>e[1]||(e[1]=[s("h4",{class:"text-h4 mb-1"}," 쯆lvid칩 su contrase침a? 游 ",-1),s("p",{class:"mb-0"}," Ingresa tu correo elect칩nico y enviaremos las instrucciones para reestablecer tu contrase침a ",-1)])),_:1}),a(v,null,{default:t(()=>[a(o(Q),{ref_key:"refVForm",ref:p,onSubmit:B(b,["prevent"])},{default:t(()=>[a(h,null,{default:t(()=>[a(i,{cols:"12"},{default:t(()=>[a(W,{modelValue:o(n),"onUpdate:modelValue":e[0]||(e[0]=m=>C(n)?n.value=m:null),autofocus:"",label:"Email",placeholder:"johndoe@email.com",type:"email",rules:["requiredValidator"in r?r.requiredValidator:o(y),"emailValidator"in r?r.emailValidator:o(x)],"error-messages":o(c).email},null,8,["modelValue","rules","error-messages"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(P,{block:"",type:"submit",loading:o(u)},{default:t(()=>e[2]||(e[2]=[T(" Enviar enlace de cambio ")])),_:1},8,["loading"])]),_:1}),a(i,{cols:"12"},{default:t(()=>[a(l,{class:"d-flex align-center justify-center",to:{name:"pages-authentication-login-v2"}},{default:t(()=>[a(j,{icon:"ri-arrow-left-s-line",class:"flip-in-rtl"}),e[3]||(e[3]=s("span",null,"Volver al inicio de sesi칩n",-1))]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{Ia as default};
